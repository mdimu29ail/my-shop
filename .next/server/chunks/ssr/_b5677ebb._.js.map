{"version":3,"sources":["turbopack:///[project]/node_modules/next/navigation.js","turbopack:///[project]/src/app/myproducts/page.jsx"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n","'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useSession } from 'next-auth/react';\r\nimport Swal from 'sweetalert2';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function MyProductsPage() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch products for the logged-in user\r\n  const fetchProducts = async () => {\r\n    if (!session?.user?.email) return;\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`/api/products?email=${session.user.email}`);\r\n      const data = await res.json();\r\n\r\n      // Filter by email in case backend sends all products\r\n      const userProducts = Array.isArray(data)\r\n        ? data.filter(p => p.email === session.user.email)\r\n        : [];\r\n\r\n      setProducts(userProducts);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setProducts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === 'authenticated') fetchProducts();\r\n  }, [status, session]);\r\n\r\n  // Delete product (with email verification)\r\n  const handleDelete = async id => {\r\n    const confirm = await Swal.fire({\r\n      title: 'Are you sure?',\r\n      text: \"You won't be able to revert this!\",\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Yes, delete it!',\r\n    });\r\n\r\n    if (!confirm.isConfirmed) return;\r\n\r\n    try {\r\n      const res = await fetch(`/api/products/${id}`, {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email: session.user.email }),\r\n      });\r\n      const result = await res.json();\r\n\r\n      if (res.ok) {\r\n        Swal.fire('Deleted!', result.message || 'Product deleted', 'success');\r\n        fetchProducts();\r\n      } else {\r\n        Swal.fire('Error', result.message || 'Failed to delete', 'error');\r\n      }\r\n    } catch (err) {\r\n      Swal.fire('Error', err.message, 'error');\r\n    }\r\n  };\r\n\r\n  if (status === 'loading' || loading)\r\n    return <p className=\"text-center mt-8\">Loading...</p>;\r\n\r\n  if (!session)\r\n    return (\r\n      <p className=\"text-center mt-8\">Please login to see your products.</p>\r\n    );\r\n\r\n  return (\r\n    <div className=\" mx-auto p-8 bg-[#F8EFBA] text-black\">\r\n      <h1 className=\"text-4xl font-bold mb-8 text-center text-orange-500\">\r\n        My Products\r\n      </h1>\r\n\r\n      {products.length === 0 ? (\r\n        <p className=\"text-center text-lg text-gray-500\">\r\n          No products added yet.\r\n        </p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n          {products.map(product => (\r\n            <div\r\n              key={product._id}\r\n              className=\"p-4 border border-gray-300 rounded-2xl shadow-lg flex flex-col justify-between transition-transform transform hover:scale-105 hover:shadow-2xl\"\r\n            >\r\n              {/* Product Image */}\r\n              <div className=\"overflow-hidden rounded-xl mb-4\">\r\n                <img\r\n                  src={product.image || '/placeholder.png'}\r\n                  alt={product.name || 'Product'}\r\n                  className=\"w-full h-40 object-cover transition-transform duration-300 hover:scale-105\"\r\n                />\r\n              </div>\r\n\r\n              {/* Product Info */}\r\n              <div className=\"mb-4\">\r\n                <h2 className=\"font-semibold text-lg truncate\">\r\n                  {product.name}\r\n                </h2>\r\n\r\n                <p className=\"font-bold text-lg mt-1\">\r\n                  ${product.current_price}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex flex-col gap-2\">\r\n                <button\r\n                  onClick={() => router.push(`/products/${product._id}`)}\r\n                  className=\"px-4 py-2 rounded-full bg-orange-300 hover:bg-orange-400 transition\"\r\n                >\r\n                  See Details\r\n                </button>\r\n                <button\r\n                  onClick={() => router.push(`/products/update/${product._id}`)}\r\n                  className=\"px-4 py-2 rounded-full bg-yellow-300 hover:bg-yellow-400 transition\"\r\n                >\r\n                  Update\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDelete(product._id)}\r\n                  className=\"px-4 py-2 rounded-full bg-red-300 hover:bg-red-400 transition\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"gCAAA,EAAO,OAAO,CAAA,EAAA,CAAA,CAAA,uECCd,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,CAAE,KAAM,CAAO,CAAE,QAAM,CAAE,CAAG,CAAA,EAAA,EAAA,UAAA,AAAU,IACtC,EAAS,CAAA,EAAA,EAAA,SAAS,AAAT,IACT,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EACrC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGjC,EAAgB,UACpB,GAAK,CAAD,EAAU,MAAM,OAAO,AAC3B,EAAW,IACX,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAC,oBAAoB,EAAE,EAAQ,IAAI,CAAC,KAAK,CAAA,CAAE,EAC7D,EAAO,MAAM,EAAI,IAAI,GAGrB,EAAe,MAAM,OAAO,CAAC,GAC/B,EAAK,MAAM,CAAC,GAAK,EAAE,KAAK,GAAK,EAAQ,IAAI,CAAC,KAAK,EAC/C,EAAE,CAEN,EAAY,EACd,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,GACd,EAAY,EAAE,CAChB,QAAU,CACR,GAAW,EACb,EACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACO,kBAAX,GAA4B,GAClC,EAAG,CAAC,EAAQ,EAAQ,EAGpB,IAAM,EAAe,MAAM,IASzB,GAAK,CARW,AAQZ,MARkB,EAAA,OAAI,CAAC,IAAI,CAAC,CAC9B,MAAO,gBACP,KAAM,oCACN,KAAM,UACN,kBAAkB,EAClB,kBAAmB,iBACrB,EAAA,EAEa,WAAW,CAExB,CAF0B,EAEtB,CACF,IAAM,EAAM,MAAM,MAAM,CAAC,cAAc,EAAE,EAAA,CAAI,CAAE,CAC7C,OAAQ,SACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,MAAO,EAAQ,IAAI,CAAC,KAAK,AAAC,EACnD,GACM,EAAS,MAAM,EAAI,IAAI,EAEzB,GAAI,EAAE,EAAE,AACV,EAAA,OAAI,CAAC,IAAI,CAAC,WAAY,EAAO,OAAO,EAAI,kBAAmB,WAC3D,KAEA,EAAA,OAAI,CAAC,IAAI,CAAC,QAAS,EAAO,OAAO,EAAI,mBAAoB,QAE7D,CAAE,MAAO,EAAK,CACZ,EAAA,OAAI,CAAC,IAAI,CAAC,QAAS,EAAI,OAAO,CAAE,QAClC,CACF,QAEA,AAAe,YAAX,GAAwB,EACnB,CAAA,EAAA,EAAA,EAAP,CAAO,EAAC,IAAA,CAAE,UAAU,4BAAmB,eAEpC,EAMH,CAAA,EAAA,EAAA,EALA,EAKA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,gBAInE,AAAoB,MAAX,MAAM,CACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CAAoC,2BAIjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+EACZ,EAAS,GAAG,CAAC,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,2JAGV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAQ,KAAK,EAAI,mBACtB,IAAK,EAAQ,IAAI,EAAI,UACrB,UAAU,iFAKd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0CACX,EAAQ,IAAI,GAGf,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAAyB,IAClC,EAAQ,aAAa,OAK3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,IAAI,CAAC,CAAC,UAAU,EAAE,EAAQ,GAAG,CAAA,CAAE,EACrD,UAAU,+EACX,gBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,IAAI,CAAC,CAAC,iBAAiB,EAAE,EAAQ,GAAG,CAAA,CAAE,EAC5D,UAAU,+EACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAa,EAAQ,GAAG,EACvC,UAAU,yEACX,gBAxCE,EAAQ,GAAG,QAjBxB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4BAAmB,sCAmEtC","ignoreList":[0]}